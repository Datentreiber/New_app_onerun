{
  "version": 1,
  "param_schema": {
    "aoi_spec":  { "type": "object" },

    "time_year":     { "type": "int",   "min": 1975, "max": 2030 },
    "time_month":    { "type": "int",   "min": 1,    "max": 12 },
    "time_quarter":  { "type": "int",   "min": 1,    "max": 4  },

    "ref_year":      { "type": "int",   "min": 2000, "max": 2025 },
    "radius_km":     { "type": "int",   "min": 1,    "max": 50 },
    "mask_threshold":{ "type": "int",   "min": 0,    "max": 50 },
    "opacity":       { "type": "float", "min": 0.0,  "max": 1.0 },

    "viz_preset_id": { "type": "string" },
    "fps":           { "type": "int",   "min": 1,    "max": 24 },
    "dimensions":    { "type": "int",   "min": 256,  "max": 2048 },
    "crs":           { "type": "string" },

    "year_start":    { "type": "int",   "min": 2012, "max": 2025 },
    "month_start":   { "type": "int",   "min": 1,    "max": 12 },
    "year_end":      { "type": "int",   "min": 2012, "max": 2025 },
    "month_end":     { "type": "int",   "min": 1,    "max": 12 },
    "scale_m":       { "type": "int",   "min": 250,  "max": 2000 },
    "pct_thresh":    { "type": "float", "min": -100.0, "max": 0.0 },
    "abs_thresh":    { "type": "float", "min": 0.0,  "max": 5.0 }
  },

  "mutex": [["split_map", "chart_right"]],
  "implies": [["qa_mask_l2", "lst_celsius"]],
  "conflicts": [["no2_monthly", "cool_spots"]],
  "compatible_with": {
    "cool_spots": ["urban_mask"],
    "ndvi_timelapse": [],
    "no2_monthly": [],
    "s2_visual": [],
    "urban_built": [],
    "nightlights_breaks": []
  },
  "composition_rules": [
    { "slot": "post_masking", "allow": ["urban_mask"], "deny": ["no2_monthly"] }
  ],
  "requires_full_uc_before_plan": false
}
